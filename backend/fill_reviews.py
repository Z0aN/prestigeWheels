#!/usr/bin/env python
import os
import sys
import django
from datetime import datetime, timedelta
from decimal import Decimal
import random

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'prestige.settings')
django.setup()

from django.contrib.auth.models import User
from rental.models import Car, Service, Booking, Review, CarService

def create_bookings_and_reviews():
    """–°–æ–∑–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–∑—ã–≤—ã –¥–ª—è –≤—Å–µ—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π"""
    
    # –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    users = list(User.objects.all())
    if not users:
        print("–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ!")
        return
    
    # –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏ —É—Å–ª—É–≥–∏
    cars = list(Car.objects.all())
    services = list(Service.objects.all())
    
    if not cars:
        print("–ù–µ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ!")
        return
    
    print(f"–ù–∞–π–¥–µ–Ω–æ {len(cars)} –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, {len(users)} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, {len(services)} —É—Å–ª—É–≥")
    
    # –û—Ç–∑—ã–≤—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
    reviews_data = {
        'Lamborghini': [
            {
                'rating': 5,
                'comment': '–ù–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è! –≠—Ç–æ—Ç Lamborghini Huracan –ø—Ä–µ–≤–∑–æ—à–µ–ª –≤—Å–µ –º–æ–∏ –æ–∂–∏–¥–∞–Ω–∏—è. –ú–æ—â—å –¥–≤–∏–≥–∞—Ç–µ–ª—è, –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–π –∑–≤—É–∫ –∏ –∏–¥–µ–∞–ª—å–Ω–∞—è —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å. –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ - –ø–æ–ª—É—á–∏–ª –º–æ—Ä–µ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–∞!'
            },
            {
                'rating': 5,
                'comment': '–ú–µ—á—Ç–∞ –¥–µ—Ç—Å—Ç–≤–∞ —Å–±—ã–ª–∞—Å—å! –ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –æ—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –í—Å–µ –±—ã–ª–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Å—å –µ—â–µ!'
            },
            {
                'rating': 4,
                'comment': '–û—Ç–ª–∏—á–Ω–∞—è –º–∞—à–∏–Ω–∞, –Ω–æ —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π üòÖ –í –æ—Å—Ç–∞–ª—å–Ω–æ–º - —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–∏. –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤!'
            }
        ],
        'Ferrari': [
            {
                'rating': 5,
                'comment': 'Ferrari F8 Tributo - —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞! –ö–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –ø—Ä–æ–¥—É–º–∞–Ω–∞ –¥–æ –º–µ–ª–æ—á–µ–π. –ó–≤—É–∫ –¥–≤–∏–≥–∞—Ç–µ–ª—è –ø—Ä–æ—Å—Ç–æ –∑–∞–≤–æ—Ä–∞–∂–∏–≤–∞–µ—Ç. –ù–µ–∑–∞–±—ã–≤–∞–µ–º—ã–π –æ–ø—ã—Ç!'
            },
            {
                'rating': 5,
                'comment': '–ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –∂–µ–Ω—ã. –í–æ—Å—Ç–æ—Ä–≥ –±—ã–ª –Ω–µ–æ–ø–∏—Å—É–µ–º—ã–π! –ú–∞—à–∏–Ω–∞ –≤ –∏–¥–µ–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –ø–µ—Ä—Å–æ–Ω–∞–ª –æ—á–µ–Ω—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π. –°–ø–∞—Å–∏–±–æ –∑–∞ —ç–º–æ—Ü–∏–∏!'
            },
            {
                'rating': 4,
                'comment': '–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å! –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–Ω—É—Å - —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –∞—Ä–µ–Ω–¥—ã, —Ö–æ—á–µ—Ç—Å—è –µ–∑–¥–∏—Ç—å –≤–µ—á–Ω–æ üòÑ'
            }
        ],
        'Porsche': [
            {
                'rating': 5,
                'comment': 'Porsche GT3 RS - —ç—Ç–æ —á–∏—Å—Ç—ã–π —Å–ø–æ—Ä—Ç! –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞, —Ç–æ—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ö–∞–∂–¥—ã–π –ø–æ–≤–æ—Ä–æ—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ. –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è —Ç—Ä–µ–∫–æ–≤—ã—Ö –¥–Ω–µ–π!'
            },
            {
                'rating': 5,
                'comment': '–ú–∞—à–∏–Ω–∞ –º–µ—á—Ç—ã! –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤ - –ø—Ä–æ–∏–∑–≤–µ–ª —Ñ—É—Ä–æ—Ä. –ö–æ–ª–ª–µ–≥–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –æ–±—Å—É–∂–¥–∞—é—Ç. –ö–∞—á–µ—Å—Ç–≤–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –Ω–∞ –≤—ã—Å–æ—Ç–µ!'
            },
            {
                'rating': 4,
                'comment': '–û—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Ä—Ç–∫–∞—Ä, –Ω–æ –¥–æ–≤–æ–ª—å–Ω–æ –∂–µ—Å—Ç–∫–∞—è –ø–æ–¥–≤–µ—Å–∫–∞ –¥–ª—è –≥–æ—Ä–æ–¥—Å–∫–∏—Ö –¥–æ—Ä–æ–≥. –ó–∞—Ç–æ –Ω–∞ —Ç—Ä–∞—Å—Å–µ - –ø—Ä–æ—Å—Ç–æ –∫–æ—Å–º–æ—Å! –†–µ–∫–æ–º–µ–Ω–¥—É—é –æ–ø—ã—Ç–Ω—ã–º –≤–æ–¥–∏—Ç–µ–ª—è–º.'
            }
        ],
        'Mercedes': [
            {
                'rating': 5,
                'comment': 'Mercedes S-Class - —ç—Ç–∞–ª–æ–Ω –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ —Ä–æ—Å–∫–æ—à–∏! –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –¥–ª—è –¥–µ–ª–æ–≤–æ–π –ø–æ–µ–∑–¥–∫–∏. –°–∞–ª–æ–Ω –ø—Ä–æ—Å—Ç–æ —à–∏–∫–∞—Ä–Ω—ã–π, –µ—Ö–∞—Ç—å –æ–¥–Ω–æ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è VIP —Å–æ–±—ã—Ç–∏–π!'
            },
            {
                'rating': 5,
                'comment': '–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å! –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ, —Å–∞–ª–æ–Ω –∫–∞–∫ –≤ —Å–∞–º–æ–ª–µ—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞. –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –¥–∞–ª—å–Ω–∏—Ö –ø–æ–µ–∑–¥–æ–∫.'
            },
            {
                'rating': 4,
                'comment': '–†–æ—Å–∫–æ—à–Ω–∞—è –º–∞—à–∏–Ω–∞, –Ω–æ —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ –≤—ã—Å–æ–∫–æ–≤–∞—Ç. –í –æ—Å—Ç–∞–ª—å–Ω–æ–º - —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è. –ë—É–¥—É —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –¥—Ä—É–∑—å—è–º!'
            }
        ],
        'BMW': [
            {
                'rating': 4,
                'comment': 'BMW X6 M - –º–æ—â–Ω—ã–π –∏ —Å—Ç–∏–ª—å–Ω—ã–π! –û—Ç–ª–∏—á–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏. –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ –ø–æ–µ–∑–¥–∫—É –≤ –≥–æ—Ä—ã - —Å–ø—Ä–∞–≤–∏–ª—Å—è –Ω–∞ –æ—Ç–ª–∏—á–Ω–æ!'
            },
            {
                'rating': 5,
                'comment': '–ü–æ—Ç—Ä—è—Å–∞—é—â–∏–π –∫—Ä–æ—Å—Å–æ–≤–µ—Ä! –î–∏–Ω–∞–º–∏–∫–∞ –∫–∞–∫ —É —Å–ø–æ—Ä—Ç–∫–∞—Ä–∞, –∞ –∫–æ–º—Ñ–æ—Ä—Ç –∫–∞–∫ —É –ø—Ä–µ–º–∏—É–º —Å–µ–¥–∞–Ω–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞!'
            },
            {
                'rating': 4,
                'comment': '–•–æ—Ä–æ—à–∞—è –º–∞—à–∏–Ω–∞ –¥–ª—è –≥–æ—Ä–æ–¥–∞ –∏ —Ç—Ä–∞—Å—Å—ã. –ú–æ—â–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å, —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ - —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –≤ –±–∞–≥–∞–∂–Ω–∏–∫–µ.'
            }
        ],
        'Bentley': [
            {
                'rating': 5,
                'comment': 'Bentley Continental GT - —ç—Ç–æ —Ä–æ—Å–∫–æ—à—å –≤ —á–∏—Å—Ç–æ–º –≤–∏–¥–µ! –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ —Å–≤–∞–¥—å–±—É - –≥–æ—Å—Ç–∏ –±—ã–ª–∏ –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ. –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–¥–µ–ª–∫–∏ —Å–∞–ª–æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ–µ!'
            },
            {
                'rating': 5,
                'comment': '–ú–∞—à–∏–Ω–∞ –¥–ª—è –∏—Å—Ç–∏–Ω–Ω—ã—Ö —Ü–µ–Ω–∏—Ç–µ–ª–µ–π! –ö–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –≥–æ–≤–æ—Ä–∏—Ç –æ —Å—Ç–∞—Ç—É—Å–µ. –û—á–µ–Ω—å –ø–ª–∞–≤–Ω—ã–π —Ö–æ–¥, —Ç–∏—Ö–∏–π —Å–∞–ª–æ–Ω. –ù–∞—Å—Ç–æ—è—â–∏–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å—Ç–∏–ª—å!'
            },
            {
                'rating': 4,
                'comment': '–†–æ—Å–∫–æ—à–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –Ω–æ –¥–æ–≤–æ–ª—å–Ω–æ –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–π –¥–ª—è –≥–æ—Ä–æ–¥—Å–∫–∏—Ö –ø–∞—Ä–∫–æ–≤–æ–∫. –í –æ—Å—Ç–∞–ª—å–Ω–æ–º - –≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ! –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –Ω–∞ –≤—ã—Å–æ—Ç–µ.'
            }
        ],
        'Range Rover': [
            {
                'rating': 5,
                'comment': 'Range Rover Sport - –∫–æ—Ä–æ–ª—å –≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫–æ–≤! –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –¥–ª—è –ø–æ–µ–∑–¥–∫–∏ –Ω–∞ –¥–∞—á—É. –ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è, –∫–æ–º—Ñ–æ—Ä—Ç –Ω–∞ –≤—ã—Å–æ—Ç–µ. –†–µ–∫–æ–º–µ–Ω–¥—É—é!'
            },
            {
                'rating': 4,
                'comment': '–û—Ç–ª–∏—á–Ω—ã–π –≤–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫ –¥–ª—è —Å–µ–º–µ–π–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫. –ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–π —Å–∞–ª–æ–Ω, –º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –æ–ø—Ü–∏–π. –†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞, –∫–æ–Ω–µ—á–Ω–æ, –Ω–µ –º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ —ç—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ.'
            },
            {
                'rating': 5,
                'comment': '–ü–æ—Ç—Ä—è—Å–∞—é—â–∞—è –º–∞—à–∏–Ω–∞! –ß—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –∫–æ—Ä–æ–ª–µ–º –¥–æ—Ä–æ–≥. –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å, —Ä–æ—Å–∫–æ—à–Ω—ã–π –∏–Ω—Ç–µ—Ä—å–µ—Ä. –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ –æ—Ö–æ—Ç—É - –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ—à–µ–ª!'
            }
        ],
        'Rolls-Royce': [
            {
                'rating': 5,
                'comment': 'Rolls-Royce Ghost - —ç—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π —ç—Ç–∞–ª–æ–Ω —Ä–æ—Å–∫–æ—à–∏! –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ —é–±–∏–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–∏. –ì–æ—Å—Ç–∏ –±—ã–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω—ã. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—å, —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞!'
            },
            {
                'rating': 5,
                'comment': '–ù–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è! –¢–∞–∫–æ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ —Ä–æ—Å–∫–æ—à–∏ —è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞–ª. –ö–∞–∂–¥–∞—è –¥–µ—Ç–∞–ª—å –ø—Ä–æ–¥—É–º–∞–Ω–∞ –¥–æ –º–µ–ª–æ—á–µ–π. –ù–∞—Å—Ç–æ—è—â–∏–π —à–µ–¥–µ–≤—Ä –∞–≤—Ç–æ–ø—Ä–æ–º–∞!'
            },
            {
                'rating': 5,
                'comment': '–ú–∞—à–∏–Ω–∞ –º–µ—á—Ç—ã! –ê—Ä–µ–Ω–¥–æ–≤–∞–ª –Ω–∞ –≤–∞–∂–Ω—É—é –¥–µ–ª–æ–≤—É—é –≤—Å—Ç—Ä–µ—á—É - –ø—Ä–æ–∏–∑–≤–µ–ª –Ω–µ–∏–∑–≥–ª–∞–¥–∏–º–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ VIP —É—Ä–æ–≤–Ω—è. –ë—É–¥—É —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –≤—Å–µ–º!'
            }
        ]
    }
    
    created_bookings = 0
    created_reviews = 0
    
    for car in cars:
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª—é—á –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–∑—ã–≤–æ–≤
        brand_key = None
        for key in reviews_data.keys():
            if key.lower() in car.brand.lower():
                brand_key = key
                break
        
        if not brand_key:
            # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
            reviews_for_car = [
                {
                    'rating': 5,
                    'comment': f'–û—Ç–ª–∏—á–Ω—ã–π {car.brand} {car.name}! –ü–æ–ª—É—á–∏–ª –º–∞—Å—Å—É —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –æ—Ç –ø–æ–µ–∑–¥–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º –ª—é–±–∏—Ç–µ–ª—è–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π!'
                },
                {
                    'rating': 4,
                    'comment': f'–•–æ—Ä–æ—à–∞—è –º–∞—à–∏–Ω–∞, –ø—Ä–∏—è—Ç–Ω–æ –±—ã–ª–æ –ø–æ–∫–∞—Ç–∞—Ç—å—Å—è. {car.brand} –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ–º. –ë—É–¥—É —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞—Ä–µ–Ω–¥—É —Å–Ω–æ–≤–∞!'
                }
            ]
        else:
            reviews_for_car = reviews_data[brand_key]
        
        # –°–æ–∑–¥–∞–µ–º 2-3 –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
        num_bookings = random.randint(2, 3)
        
        for i in range(num_bookings):
            # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user = random.choice(users)
            
            # –°–æ–∑–¥–∞–µ–º –¥–∞—Ç—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–≤ –ø—Ä–æ—à–ª–æ–º)
            start_date = datetime.now().date() - timedelta(days=random.randint(7, 60))
            end_date = start_date + timedelta(days=random.randint(1, 5))
            
            # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è
            car_services = list(CarService.objects.filter(car=car))
            selected_services = random.sample(car_services, random.randint(0, min(2, len(car_services))))
            
            # –°–æ–∑–¥–∞–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            booking = Booking.objects.create(
                user=user,
                car=car,
                date_from=start_date,
                date_to=end_date,
                status='confirmed'  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
            )
            
            # –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏
            booking.services.set(selected_services)
            created_bookings += 1
            
            # –°–æ–∑–¥–∞–µ–º –æ—Ç–∑—ã–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            if i < len(reviews_for_car):
                review_data = reviews_for_car[i]
            else:
                review_data = random.choice(reviews_for_car)
            
            review = Review.objects.create(
                booking=booking,
                rating=review_data['rating'],
                comment=review_data['comment'],
                is_moderated=True
            )
            # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—Ä–µ–Ω–¥—ã
            review.created_at = datetime.combine(booking.date_to + timedelta(days=random.randint(1, 5)), datetime.now().time())
            review.save()
            created_reviews += 1
            
            print(f"‚úì –°–æ–∑–¥–∞–Ω–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–∑—ã–≤ –¥–ª—è {car.brand} {car.name} (—Ä–µ–π—Ç–∏–Ω–≥: {review.rating})")
    
    print(f"\nüéâ –°–æ–∑–¥–∞–Ω–æ {created_bookings} –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏ {created_reviews} –æ—Ç–∑—ã–≤–æ–≤!")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
    print("\nüìä –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π...")
    for car in cars:
        car.update_rating()
        print(f"   {car.brand} {car.name}: {car.average_rating:.1f} ({car.total_reviews} –æ—Ç–∑—ã–≤–æ–≤)")

if __name__ == "__main__":
    print("üöó –ó–∞–ø–æ–ª–Ω—è–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –æ—Ç–∑—ã–≤–∞–º–∏...")
    create_bookings_and_reviews()
    print("\n‚úÖ –ì–æ—Ç–æ–≤–æ! –í—Å–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –æ—Ç–∑—ã–≤—ã.") 